function getRemoteContent(){var t=new XMLHttpRequest;t.open("get","json/products.json"),t.onload=function(){var t=JSON.parse(this.response);window.productList=new products(t),console.log(t)},t.send()}window.onload=function(){var t=document.querySelector("#inputEmail3"),e=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;window.checkEmail=function(){var n=e.test(t.value)?"none":"block";return t.parentNode.querySelector(".error-message").style.display=n,e.test(t.value)},t.onchange=checkEmail;var n=document.querySelector(".form-horizontal");n.onsubmit=function(){return checkEmail()?void 0:!1},window.onresize=function(){},getRemoteContent()};var products=function(t){this.construct=function(){this.searchInput=document.querySelector("#search-input"),this.searchButton=document.querySelector("#search-button"),this.saveButton=document.querySelector("#save-button"),this.tbody=document.querySelector("#product-table tbody"),this.products=t,this.fillTable(),this.setEvents()},this.setEvents=function(){var t=this;this.searchButton.addEventListener("click",function(){t.filterTable()},!1),this.saveButton.addEventListener("click",function(){t.postDataToTheServer()},!1)},this.watchInputs=function(){var t=this,e=this.tbody.querySelectorAll("input");Array.prototype.forEach.call(e,function(e){e.addEventListener("change",function(){t.changeProducts(this)})})},this.changeProducts=function(t){console.log(t.value);var e=t.getAttribute("data-id"),n=t.getAttribute("data-key");this.find("id",e)[n]=t.value},this.postDataToTheServer=function(){console.log(this),$.post("http://127.0.0.1:3333",JSON.stringify(this.products),function(t){console.log(t)})},this.filterTable=function(){console.log(this);var t=this.searchInput.value,e=[];e=t.length<1?this.products:this.findAll(t),this.fillTable(e)},this.find=function(t,e){for(var n in this.products)if(this.products[n][t]==e)return this.products[n];return-1},this.findAll=function(t){var e=[];for(var n in this.products)-1!==this.joinRecord(this.products[n]).indexOf(t)&&e.push(this.products[n]);return e},this.joinRecord=function(t){var e="";for(var n in t)e+="|"+t[n];return e},this.fillTable=function(t){t=t||this.products,this.tbody.innerHTML="";for(var e in t){var n=document.createElement("tr");this.tbody.appendChild(n),this.createCells(n,t[e])}this.watchInputs()},this.createCells=function(t,e){for(var n in e){var o=document.createElement("td");o.innerHTML='<input data-id="'+e.id+'" data-key="'+n+'" class="form-control" type="text" value="'+e[n]+'">',t.appendChild(o)}},this.construct()};